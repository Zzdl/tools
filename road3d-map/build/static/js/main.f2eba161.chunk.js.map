{"version":3,"sources":["components/TitleHeader/index.js","components/Map3D/style.js","components/Map3D/index.js","components/Map2D/style.js","components/Map2D/index.js","App.js","serviceWorker.js","index.js"],"names":["useState","showInput","setShowInput","localStorage","getItem","header","setHeader","useEffect","setItem","className","value","onChange","e","target","onPressEnter","onBlur","type","shape","icon","onClick","darkStyle","Map3D","isShow","visible","this","initMap","forceUpdate","options","Object","assign","tilt","heading","props","map","window","BMapGL","Map","mapRef","restrictCenter","style","enableKeyboard","enableScrollWheelZoom","enableInertialDragging","enableContinuousZoom","setTilt","setHeading","setDisplayOptions","indoor","poi","skyColors","center","zoom","centerAndZoom","Point","onMapLoaded","children","React","Children","child","cloneElement","render","display","position","height","ref","width","renderChildren","onRender","Component","simpleMapStyle","styleJson","Map2D","reducer","accumulator","currentValue","getAverageValue","items","reduce","length","parseData","data","lineData","item","push","geometry","coordinates","loc","dataHander","highlightRoadHander","index","heatDataHander","max","min","text","colorArr","color1","color2","color3","color4","color5","splitList","category","percent","getColorFromColorStops","colorStops","i","startColorStop","endColorStop","startPercent","endPercent","startColor","endColor","relativePercent","startColorObj","Color","endColorObj","sr","red","sg","green","sb","blue","sa","alpha","er","eg","eb","ea","toFixed","dataWeRender","selectValue","linksData","roadPath","highlightRoad","x","mapStyle","lng","lat","1","color","bgColor","arrowColor","lineWidth","FizzyText","radius","gradient","color1Value","color2Value","color3Value","color4Value","gradientOptions","0.25","0.55","0.85","App","canvasWidth","canvasHeight","state","ShenhaiData","innerHeight","tRef","createRef","parseTime","num","Math","floor","slice","onResize","setState","initMapvgl","heatMax","view","mapvgl","initGUIPanel","initCanvas","drawMapvgl","nuConfig","container","canvasContainer","blur","backgroundColor","heatmap","h337","create","canvas","_renderer","ctx","getContext","heatData","maxText","setValue","radiusText","setData","mockCanvas","document","createElement","mockCtx","imageData","toDataURL","img","src","_this","onload","drawImage","layer","texture","enablePreciseMap","addLayer","drawTimeText","font","fillStyle","textAlign","textBaseline","save","scale","fillText","restore","roadData","dataMaxWidth","dataMaxHeight","dataMaxValue","dataMinValue","Infinity","hotData","path","link","j","hot","split","k","Number","y","preWidth","preHeight","forEach","bindCanvasRef","input","layerSetData","changeHeatMap","setDataMax","setDataMin","clearRect","setOptions","changeHeatMapAllColor","configure","changeHeatMapColor","onChangeClick","gui","dat","GUI","nameMap","add","minText","onFinishChange","addGradient","addColor","__controllers","updateDisplay","onDropUploadClick","preventDefault","stopPropagation","files","dataTransfer","reader","FileReader","readAsText","evt","JSON","parse","result","removeLayer","getFileContent","current","fileInput","callback","size","file","onloadend","addEventListener","ceil","pageX","getBoundingClientRect","left","pageY","top","showPoint","filter","nowTime","removeEventListener","Fragment","Boolean","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"yXAIe,G,OAAA,WAAO,IAAD,EACiBA,oBAAS,GAD1B,mBACVC,EADU,KACCC,EADD,OAEWF,mBAASG,aAAaC,QAAQ,UAAY,gBAFrD,mBAEVC,EAFU,KAEFC,EAFE,KAQjB,OAJAC,qBAAU,WACNJ,aAAaK,QAAQ,QAASH,KAC/B,CAACA,IAGA,yBAAKI,UAAU,gBACX,4BAAKJ,GACJJ,GAAa,uBACVQ,UAAU,cACVC,MAAOL,EACPM,SAAU,SAAAC,GAAMN,EAAUM,EAAEC,OAAOH,QACnCI,aAAc,WAAOZ,GAAcD,IACnCc,OAAQ,WAAOb,GAAcD,OAE/BA,GAAa,uBACXQ,UAAU,YACVO,KAAK,SACLC,MAAM,SACNC,KAAK,OACLC,QAAS,WAAOjB,GAAcD,SCmQ1CmB,EAAY,CAAC,CACb,YAAe,aACf,YAAe,WACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,WACf,YAAe,cACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,OACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,OACf,YAAe,gBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,OACf,YAAe,kBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,UACf,YAAe,gBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,UACf,YAAe,kBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,cACf,YAAe,gBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,cACf,YAAe,kBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,gBACf,YAAe,gBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,gBACf,YAAe,kBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,UACf,YAAe,WACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,cACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,cACf,YAAe,cACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,kBACf,YAAe,cACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,kBACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,oBACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,oBACf,YAAe,cACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,kBACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,kBACf,YAAe,cACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,cACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,cACf,YAAe,cACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,WACf,YAAe,mBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,WACf,YAAe,qBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,gBACf,YAAe,mBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,gBACf,YAAe,qBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,WACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,eACf,YAAe,SACf,QAAW,CACP,WAAc,OAEnB,CACC,YAAe,eACf,YAAe,cACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,eACf,YAAe,mBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,eACf,YAAe,qBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,UACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,UACf,YAAe,WACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,QACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,QACf,YAAe,WACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,QACf,YAAe,WACf,QAAW,CACP,MAAS,YACT,WAAc,QAEnB,CACC,YAAe,SACf,YAAe,WACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,UACf,YAAe,SACf,QAAW,CACP,WAAc,OAEnB,CACC,YAAe,UACf,YAAe,qBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,UACf,YAAe,mBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,OACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,UACf,YAAe,SACf,QAAW,CACP,WAAc,QAEnB,CACC,YAAe,UACf,YAAe,WACf,QAAW,CACP,OAAU,IAEf,CACC,YAAe,cACf,YAAe,gBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,WACf,YAAe,gBACf,QAAW,CACP,MAAS,cAEd,CACC,YAAe,WACf,YAAe,kBACf,QAAW,CACP,MAAS,aAEd,CACC,YAAe,cACf,YAAe,kBACf,QAAW,CACP,MAAS,c,kOChjBIC,E,2MA2EjBC,OAAS,SAACC,GACN,OAAOA,EAAU,QAAU,Q,mFAzE3BC,KAAKC,UACLD,KAAKE,gB,gCAKL,IAAIC,EAAUC,OAAOC,OAAO,CACxBC,KAAM,GACNC,QAAS,GACVP,KAAKQ,MAAML,SACVM,EAAM,IAAIC,OAAOC,OAAOC,IAAIZ,KAAKa,OAAQ,CACzCC,gBAAgB,EAChBC,MAAOZ,EAAQY,OAASnB,IAE5Ba,EAAIO,iBACJP,EAAIQ,wBACJR,EAAIS,yBACJT,EAAIU,uBACJV,EAAIW,QAAQjB,EAAQG,MACpBG,EAAIY,WAAWlB,EAAQI,SACvBE,EAAIa,kBAAkB,CAClBC,QAAQ,EACRC,KAAK,EACLC,UAAWtB,EAAQsB,WAAa,CAC5B,uBACA,yBAGJzB,KAAKQ,MAAMkB,QAAU1B,KAAKQ,MAAMmB,MAChClB,EAAImB,cAAc,IAAIlB,OAAOC,OAAOkB,MAAM7B,KAAKQ,MAAMkB,OAAO,GAAI1B,KAAKQ,MAAMkB,OAAO,IAAK1B,KAAKQ,MAAMmB,MAGtG3B,KAAKS,IAAMA,EACXT,KAAKQ,MAAMsB,aAAe9B,KAAKQ,MAAMsB,YAAYrB,K,uCAGnC,IAAD,OAGTsB,EACA/B,KAAKQ,MADLuB,SAGJ,GAAKA,GAAa/B,KAAKS,IAEvB,OAAOuB,IAAMC,SAASxB,IAAIsB,GAAU,SAAAG,GAEhC,GAAKA,EAIL,MAA0B,kBAAfA,EAAM1C,KACN0C,EAEAF,IAAMG,aAAaD,EAAO,CAC7BzB,IAAK,EAAKA,W,iCAUtB,GAAKT,KAAKQ,MAAM4B,QAAWpC,KAAKS,IAIhC,OAAOT,KAAKQ,MAAM4B,OAAOpC,KAAKS,O,+BAQxB,IAAD,OAEDV,EACAC,KAAKQ,MADLT,QAEAgB,E,yWAAK,EACLsB,QAASrC,KAAKF,OAAOC,GACrBuC,SAAU,WACVC,OAAQ,QACLvC,KAAKQ,MAAMO,OAElB,OACI,yBAAKA,MAAOA,GACR,yBAAMyB,IAAQ,SAAA3B,GAAM,OAAK,EAAKA,OAASA,GACnCE,MAAS,CAAE0B,MAAO,OAAQF,OAAQ,UAEpCvC,KAAK0C,iBACL1C,KAAK2C,gB,GA/FYC,a,QCPxBC,EAAiB,CACxBC,UAAW,CACP,CACI,YAAe,MACf,YAAe,MACf,QAAW,CACP,UAAa,GACb,YAAe,OCFVC,E,2MAEnBC,QAAU,SAACC,EAAaC,GAAd,OAAgCD,EAAcC,EAAa,I,EAGrEC,gBAAkB,SAACC,GAAD,OAAWA,EAAMC,OAAO,EAAKL,QAAS,GAAKI,EAAME,Q,EAEnEC,UAAY,SAACC,GACX,IAAMC,EAAW,GAUjB,OATAD,EAAK/C,KAAI,SAAAiD,GACPD,EAASE,KAAK,CACZC,SAAU,CACNpE,KAAM,aACNqE,YAAaH,EAAKI,IAClB5E,MAAO,EAAKiE,gBAAgBO,EAAKF,YAIlCC,G,EAIT3D,OAAS,SAACC,GACR,OAAOA,EAAU,OAAS,S,EAG5BgE,WAAa,SAAAP,GACX,IAAMC,EAAW,GAIjB,OAHAD,EAAK/C,KAAI,SAAAiD,GACPD,EAASE,KAAKD,EAAKE,SAASC,gBAEvBJ,G,EAGTO,oBAAsB,SAACR,GAAqB,IAAfS,EAAc,uDAAN,EACnC,MAAO,CAACT,EAAKS,GAAOL,SAASC,c,EAG/BK,eAAiB,SAACC,EAAKC,EAAKZ,GAAU,IAC5Ba,EAAS,EAAK7D,MAAd6D,KAEFC,EAAW,CACf,CAAC,GAFgDD,EAA3CE,QAGN,CAAC,GAHgDF,EAAnCG,QAId,CAAC,IAJgDH,EAA3BI,QAKtB,CAAC,GALgDJ,EAAnBK,QAM9B,CAAC,EANgDL,EAAXM,SASlCC,EAAY,GACZC,EAAW,GAOjB,OANArB,EAAK/C,KAAI,SAACiD,EAAMO,GACd,IAAMa,GAAWpB,EAAKE,SAAS1E,MAAQkF,IAAQD,EAAMC,GACrDQ,EAAUX,GAAS,EAAKc,uBAAuBT,EAAUQ,GACzDD,EAASlB,KAAKM,MAGT,CAAEW,YAAWC,a,EAGtBE,uBAAyB,SAACC,EAAYF,GAChCA,EAAU,IACZA,EAAU,GAERA,EAAU,IACZA,EAAU,GAGZ,IADA,IAAIG,EAAI,EACC3B,EAAS0B,EAAW1B,OAAQ2B,EAAI3B,IAAU2B,EAAG,CAEpD,GADkBD,EAAWC,GACf,IAAMH,EAClB,MAGJ,IAAMI,EAAiBF,EAAWC,EAAI,GAChCE,EAAeH,EAAWC,GAC5BG,EAAe,EACfC,EAAa,EACbC,EAAa,KACbC,EAAW,KACXL,IACFE,EAAeF,EAAe,GAC9BI,EAAaJ,EAAe,IAE1BC,IACFE,EAAaF,EAAa,GAC1BI,EAAWJ,EAAa,IAErBG,IACHA,EAAaC,GAAY,QAEtBA,IACHA,EAAWD,GAAc,QAG3B,IAAIE,GAAmBV,EAAUM,IAAiBC,EAAaD,GACzDK,EAAgBC,IAAMJ,GACtBK,EAAcD,IAAMH,GACpBK,EAAKH,EAAcI,MACnBC,EAAKL,EAAcM,QACnBC,EAAKP,EAAcQ,OACnBC,EAAKT,EAAcU,QACnBC,EAAKT,EAAYE,MACjBQ,EAAKV,EAAYI,QACjBO,EAAKX,EAAYM,OACjBM,EAAKZ,EAAYQ,QACvB,MAAO,gBAASP,GAAMQ,EAAKR,GAAMJ,GAAiBgB,UAA3C,gBACDV,GAAMO,EAAKP,GAAMN,GAAiBgB,UADjC,gBAEDR,GAAMM,EAAKN,GAAMR,GAAiBgB,UAFjC,gBAGDN,GAAMK,EAAKL,GAAMV,GAAiBgB,UAHjC,M,wEAOC,IAAD,EACmDxG,KAAKQ,MAAvDkB,EADD,EACCA,OAAQC,EADT,EACSA,KAAM0C,EADf,EACeA,KAAMoC,EADrB,EACqBA,aAAcC,EADnC,EACmCA,YACpCC,EAAY3G,KAAKuD,UAAUkD,GAG3BG,EAAW5G,KAAK+D,WAAW4C,GAG3BE,EAAgBH,GAAe1G,KAAKgE,oBAAoB2C,EAAWD,EAAYI,GAR9E,EAW0B9G,KAAKkE,eAAeG,EAAKF,IAAKE,EAAKD,IAAKuC,GAAjE/B,EAXD,EAWCA,UAAWC,EAXZ,EAWYA,SAEnB,OACE,kBAAC,MAAD,CACE9D,MAAO,CAAEwB,OAAQ,SACjBwE,SAAUlE,EACVnB,OAAQ,CAAEsF,IAAKtF,EAAO,GAAIuF,IAAKvF,EAAO,IACtCC,KAAMA,EACNV,uBAAuB,GAEzB,kBAAC,OAAD,CACE4D,SAAU,CAAC,GACXD,UAAW,CACTsC,EAAG,WAELC,MAAM,oBACNC,QAAQ,wBACRC,WAAW,oBACXC,UAAW,GACXV,SAAUC,IAEZ,kBAAC,OAAD,CACEhC,SAAUA,EACVD,UAAWA,EACXuC,MAAM,oBACNC,QAAQ,wBACRC,WAAW,oBACXC,UAAW,GACXV,SAAUA,S,GAxJiBhE,a,eCMnC,SAAS2E,EAAUC,EAAQrD,EAAKC,EAAKqD,EAAUC,EAAanD,EAAQoD,EAAanD,EAAQoD,EAAanD,EAAQoD,EAAanD,GACvH1E,KAAKwH,OAASA,EACdxH,KAAKmE,IAAMA,EACXnE,KAAKoE,IAAMA,EACXpE,KAAKyH,SAAWA,EAEhBzH,KAAK0H,YAAcA,EACnB1H,KAAKuE,OAASA,EACdvE,KAAK2H,YAAcA,EACnB3H,KAAKwE,OAASA,EACdxE,KAAK4H,YAAcA,EACnB5H,KAAKyE,OAASA,EACdzE,KAAK6H,YAAcA,EACnB7H,KAAK0E,OAASA,EAIlB,IAAMoD,EAAkB,CACpB,CACIC,IAAM,qBACNC,IAAM,qBACNC,IAAM,uBACNf,EAAK,sBAET,CACIa,IAAM,qBACNC,IAAM,uBACNC,IAAM,qBACNf,EAAK,sBAET,CACIa,IAAM,qBACNC,IAAM,qBACNC,IAAM,uBACNf,EAAK,0BAET,CACIa,IAAM,yBACNC,IAAM,uBACNC,IAAM,qBACNf,EAAG,uBAiiBIgB,E,2MA3hBXC,YAAc,I,EACdC,aAAe,G,EACfC,MAAQ,CACJ5B,aAAc6B,EACdC,YAAa7H,OAAO6H,YACpBxI,SAAS,EACTsE,KAAM,KACNqC,YAAa,M,EAEjB8B,KAAOxG,IAAMyG,Y,EAgCbC,UAAY,SAACC,GACT,OAAQ,IAAMC,KAAKC,MAAMF,GAAO,IAAIG,OAAO,GAAK,KAAQH,EAAM,EAAG,GAAK,KAAKG,MAAM,EAAG,I,EAOxFC,SAAW,WACP,EAAKC,SAAS,CACVT,YAAa7H,OAAO6H,e,EAI5BzG,YAAc,SAAArB,GACV,EAAKA,IAAMA,EACX,EAAKwI,WAAWxI,I,EAGpBwI,WAAa,SAAAxI,GAAQ,IACTgG,EAAiB,EAAK4B,MAAtB5B,aACFyC,EAAY,EAAK3F,UAAUkD,GAA3ByC,QAEN,EAAKC,KAAO,IAAIC,OAAY,CACxB3I,IAAKA,IAGT,EAAK4I,aAAa,EAAGH,EAAS,EAAG,CAC7BnB,IAAM,qBACNC,IAAM,qBACNC,IAAM,uBACNf,EAAK,sBACK,IAAVgC,EAAe,qBACL,IAAVA,EAAe,qBACL,IAAVA,EAAe,uBACL,EAAVA,EAAa,sBACjB,EAAKI,aACL,EAAKC,c,EAITD,WAAa,WAAO,IACR7B,EAAa,EAAKpD,KAAlBoD,SAEF+B,EAAW,CACbC,UAAW,EAAKC,gBAChBC,KAAM,EACNlC,WACAmC,gBAAiB,QAGrB,EAAKC,QAAUC,IAAKC,OAAOP,GAC3B,EAAKQ,OAAS,EAAKH,QAAQI,UAAUD,OACrC,EAAKE,IAAM,EAAKF,OAAOG,WAAW,O,EAGtCZ,WAAa,WAAO,IACR9C,EAAiB,EAAK4B,MAAtB5B,aADO,EAEyB,EAAKlD,UAAUkD,GAA/CyC,EAFO,EAEPA,QAASkB,EAFF,EAEEA,SAAU3G,EAFZ,EAEYA,SAE3B,EAAK4G,QAAQC,SAASpB,GACtB,EAAKxB,YAAY4C,SAAmB,IAAVpB,GAC1B,EAAKvB,YAAY2C,SAAmB,IAAVpB,GAC1B,EAAKtB,YAAY0C,SAAmB,IAAVpB,GAC1B,EAAKrB,YAAYyC,SAAmB,EAAVpB,GAE1B,EAAKqB,WAAWD,SAAS,GAEzBF,EAAS3J,KAAI,SAAAiD,GAAI,OAAKtD,OAAOC,OAAOqD,EAAM,CAAC8D,OAAQ,OAEnD,EAAKqC,QAAQW,QAAQ,CACjBrG,IAAK+E,EACL9E,IAAK,EACLZ,KAAM4G,IAEV,EAAKK,WAAaC,SAASC,cAAc,UACzC,EAAKF,WAAWhI,MAAQ,IACxB,EAAKgI,WAAWlI,OAAS,IACzB,EAAKqI,QAAU,EAAKH,WAAWN,WAAW,MAE1C,EAAKU,UAAY,EAAKb,OAAOc,YAC7B,IAAIC,EAAM,EAAKA,IAAML,SAASC,cAAc,OAC5C,EAAKI,IAAIC,IAAM,EAAKH,UACpB,EAAKE,IAAItI,MAAQ,IACjB,EAAKsI,IAAIxI,OAAS,GAClB,IAAM0I,EAAK,eACX,EAAKF,IAAIG,OAAS,WACdD,EAAML,QAAQO,UAAUJ,EAAK,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,IAAK,KACvDE,EAAMG,MAAQ,IAAIhC,YAAiB,CAC/BiC,QAASJ,EAAMR,WACflI,OAAQ,KACR+I,kBAAkB,IAEtBL,EAAM9B,KAAKoC,SAASN,EAAMG,OAC1BH,EAAMG,MAAMZ,QAAQ/G,K,EAK5B+H,aAAe,WACX,EAAKtB,IAAIuB,KAAO,uCAChB,EAAKvB,IAAIwB,UAAY,OACrB,EAAKxB,IAAIyB,UAAY,OACrB,EAAKzB,IAAI0B,aAAe,SACxB,EAAK1B,IAAI2B,OACT,EAAK3B,IAAI4B,MAAM,EAAE,EAAG,GACpB,IAAK,IAAI7G,EAAI,EAAGA,GAAK,EAAGA,IACpB,EAAKiF,IAAI6B,SAAT,UAAqB,EAAK9G,EAA1B,OAAkC,EAAG,EAAKmD,aAAe,EAAInD,GAEjE,EAAKiF,IAAI8B,W,EAGbzI,UAAY,SAAA0I,GAQR,IAPA,IAAIC,EAAeD,EAAS3I,OACxB6I,EAAgB,EAChBC,EAAe,EACfC,EAAeC,IACf7I,EAAW,GACX8I,EAAU,GACVC,EAAO,GACFvH,EAAI,EAAGA,EAAIgH,EAAS3I,OAAQ2B,IAAK,CAEtC,IADA,IAAMwH,EAAOR,EAAShH,GACbyH,EAAI,EAAGA,EAAID,EAAKjJ,KAAKF,OAAQoJ,IAAK,CACvC,IAAMC,EAAMF,EAAKjJ,KAAKkJ,GACtBH,EAAQ5I,KAAR,CAAcsB,GAAd,mBAAoB0H,KACpBR,EAAgBvD,KAAKzE,IAAIgI,EAAeQ,EAAI,IAC5CP,EAAexD,KAAKzE,IAAIiI,EAAcO,EAAI,IAC1CN,EAAezD,KAAKxE,IAAIiI,EAAcM,EAAI,IAI9C,IADA,IAAI7I,EAAM2I,EAAK3I,IAAI8I,MAAM,KAChBC,EAAI,EAAGA,EAAI/I,EAAIR,OAAQuJ,GAAG,EAAG,CAClC,IAAM/F,EAAIgG,OAAOhJ,EAAI+I,IACfE,EAAID,OAAOhJ,EAAI+I,EAAG,IACxBL,EAAK7I,KAAK,CAACmD,EAAGiG,KAItBtJ,EAASE,KAAK,CACVC,SAAU,CACNpE,KAAM,aACNqE,YAAa2I,KAIrB,IAAIpC,EAAW,GACX4C,EAAW,EAAK7E,YAAc+D,EAC9Be,EAAY,EAAK7E,aAAe+D,EAUpC,OARAI,EAAQW,SAAQ,SAAA1J,GACZ4G,EAASzG,KAAK,CACVmD,EAAGtD,EAAK,GAAKwJ,EACbD,EAAGvJ,EAAK,GAAKyJ,EACb/N,MAAOsE,EAAK,QAIb,CACH0F,QAASkD,EACThC,WACA3G,WACA8I,Y,EAIRY,cAAgB,SAAAC,GACZ,EAAK1D,gBAAkB0D,G,EAG3BC,aAAe,WAAO,IACV5G,EAAiB,EAAK4B,MAAtB5B,aACAhD,EAAa,EAAKF,UAAUkD,GAA5BhD,SAEJ,EAAK2H,QACL,EAAKjC,KAAKoC,SAAS,EAAKH,OACxB,EAAKA,MAAMZ,QAAQ/G,K,EAI3B6J,cAAgB,WAAO,IACX7G,EAAiB,EAAK4B,MAAtB5B,aACA2D,EAAa,EAAK7G,UAAUkD,GAA5B2D,SAFU,EAGW,EAAK/F,KAA1BmD,EAHU,EAGVA,OAAQrD,EAHE,EAGFA,IAAKC,EAHH,EAGGA,IACrBgG,EAAS3J,KAAI,SAAAiD,GAAI,OAAKtD,OAAOC,OAAOqD,EAAM,CAAC8D,cAC3C,EAAKqC,QAAQ0D,WAAWpJ,GACxB,EAAK0F,QAAQ2D,WAAWpJ,GAExB,EAAKyF,QAAQW,QAAQ,CACjBrG,IAAKA,EACLC,IAAKA,EACLZ,KAAM4G,IAGV,EAAKQ,QAAU,EAAKH,WAAWN,WAAW,MAC1C,EAAKS,QAAQ6C,UAAU,EAAG,EAAG,EAAKhD,WAAWhI,MAAO,EAAKgI,WAAWlI,QACpE,IAAIsI,EAAY,EAAKhB,QAAQI,UAAUD,OAAOc,YAE9C,EAAKC,IAAIC,IAAMH,EACf,IAAMI,EAAK,eAEX,EAAKF,IAAIG,OAAS,WACdD,EAAML,QAAQO,UAAUF,EAAMF,IAAK,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,IAAK,KAC7DE,EAAMG,MAAMsC,WAAW,CACnBrC,QAASJ,EAAMR,cAGvB,EAAK4C,eACL,EAAKnN,e,EAGT6E,uBAAyB,SAACC,EAAYF,GAC9BA,EAAU,IACZA,EAAU,GAERA,EAAU,IACZA,EAAU,GAGZ,IADA,IAAIG,EAAI,EACC3B,EAAS0B,EAAW1B,OAAQ2B,EAAI3B,IAAU2B,EAAG,CAEpD,GADkBD,EAAWC,GACf,IAAMH,EAClB,MAGJ,IAAMI,EAAiBF,EAAWC,EAAI,GAChCE,EAAeH,EAAWC,GAC5BG,EAAe,EACfC,EAAa,EACbC,EAAa,KACbC,EAAW,KACXL,IACFE,EAAeF,EAAe,GAC9BI,EAAaJ,EAAe,IAE1BC,IACFE,EAAaF,EAAa,GAC1BI,EAAWJ,EAAa,IAErBG,IACHA,EAAaC,GAAY,QAEtBA,IACHA,EAAWD,GAAc,QAG3B,IAAIE,GAAmBV,EAAUM,IAAiBC,EAAaD,GACzDK,EAAgBC,IAAMJ,GACtBK,EAAcD,IAAMH,GACpBK,EAAKH,EAAcI,MACnBC,EAAKL,EAAcM,QACnBC,EAAKP,EAAcQ,OACnBC,EAAKT,EAAcU,QACnBC,EAAKT,EAAYE,MACjBQ,EAAKV,EAAYI,QACjBO,EAAKX,EAAYM,OACjBM,EAAKZ,EAAYQ,QACvB,MAAO,gBAASP,GAAMQ,EAAKR,GAAMJ,GAAiBgB,UAA3C,gBACDV,GAAMO,EAAKP,GAAMN,GAAiBgB,UADjC,gBAEDR,GAAMM,EAAKN,GAAMR,GAAiBgB,UAFjC,gBAGDN,GAAMK,EAAKL,GAAMV,GAAiBgB,UAHjC,M,EAMXmH,sBAAwB,WAAO,IAAD,EACmD,EAAKtJ,KAA1EF,EADkB,EAClBA,IAAKuD,EADa,EACbA,YAAaC,EADA,EACAA,YAAaC,EADb,EACaA,YAAaC,EAD1B,EAC0BA,YAE9C2B,EAAW,CACb/B,SAJsB,EACuCA,SAI7DmC,gBAAiB,QAIrB,EAAKrF,OAAO+F,SAASd,EAAS/B,SAASC,EAAcvD,IACrD,EAAKK,OAAO8F,SAASd,EAAS/B,SAASE,EAAcxD,IACrD,EAAKM,OAAO6F,SAASd,EAAS/B,SAASG,EAAczD,IACrD,EAAKO,OAAO4F,SAASd,EAAS/B,SAASI,EAAc1D,IAErD,EAAK0F,QAAQ+D,UAAUpE,GAEvB,EAAKoB,QAAU,EAAKH,WAAWN,WAAW,MAC1C,EAAKS,QAAQ6C,UAAU,EAAG,EAAG,EAAKhD,WAAWhI,MAAO,EAAKgI,WAAWlI,QACpE,IAAIsI,EAAY,EAAKhB,QAAQI,UAAUD,OAAOc,YAE9C,EAAKC,IAAIC,IAAMH,EAEf,IAAMI,EAAK,eACX,EAAKF,IAAIG,OAAS,WACdD,EAAML,QAAQO,UAAUF,EAAMF,IAAK,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,IAAK,KAC7DE,EAAMG,MAAMsC,WAAW,CACnBrC,QAASJ,EAAMR,cAGvB,EAAK4C,eACL,EAAKnN,e,EAET2N,mBAAqB,WAAO,IAAD,IAC4E,EAAKxJ,KAAhGF,EADe,EACfA,IAAKuD,EADU,EACVA,YAAaC,EADH,EACGA,YAAaC,EADhB,EACgBA,YAAaC,EAD7B,EAC6BA,YAE9CvD,EAAW,CACb,CAAC,IAJkB,EAC0CC,QAI7D,CAAC,IALkB,EACkDC,QAKrE,CAAC,IANkB,EAC0DC,QAM7E,CAAC,EAPkB,EACkEC,SASnF8E,EAAW,CACb/B,UAAQ,mBACHC,EAAcvD,EAAO,EAAKY,uBAAuBT,EAAUoD,EAAcvD,IADtE,cAEHwD,EAAcxD,EAAO,EAAKY,uBAAuBT,EAAUqD,EAAcxD,IAFtE,cAGHyD,EAAczD,EAAO,EAAKY,uBAAuBT,EAAUsD,EAAczD,IAHtE,cAIH0D,EAAc1D,EAAO,EAAKY,uBAAuBT,EAAUuD,EAAc1D,IAJtE,GAMRyF,gBAAiB,QAGrB,EAAKrF,OAAO+F,SAASd,EAAS/B,SAASC,EAAcvD,IACrD,EAAKK,OAAO8F,SAASd,EAAS/B,SAASE,EAAcxD,IACrD,EAAKM,OAAO6F,SAASd,EAAS/B,SAASG,EAAczD,IACrD,EAAKO,OAAO4F,SAASd,EAAS/B,SAASI,EAAc1D,IAErD,EAAKuD,YAAYvD,IAAIA,GACrB,EAAKwD,YAAYxD,IAAIA,GACrB,EAAKyD,YAAYzD,IAAIA,GACrB,EAAK0D,YAAY1D,IAAIA,GAGrB,EAAK0F,QAAQ+D,UAAUpE,GAEvB,EAAKoB,QAAU,EAAKH,WAAWN,WAAW,MAC1C,EAAKS,QAAQ6C,UAAU,EAAG,EAAG,EAAKhD,WAAWhI,MAAO,EAAKgI,WAAWlI,QACpE,IAAIsI,EAAY,EAAKhB,QAAQI,UAAUD,OAAOc,YAE9C,EAAKC,IAAIC,IAAMH,EAEf,IAAMI,EAAK,eACX,EAAKF,IAAIG,OAAS,WACdD,EAAML,QAAQO,UAAUF,EAAMF,IAAK,EAAG,EAAG,IAAK,GAAI,EAAG,EAAG,IAAK,KAC7DE,EAAMG,MAAMsC,WAAW,CACnBrC,QAASJ,EAAMR,cAGvB,EAAK4C,eACL,EAAKnN,e,EAGT4N,cAAgB,WAAO,IACX/N,EAAY,EAAKsI,MAAjBtI,QAER,EAAKiJ,SAAS,CAAEjJ,SAAUA,K,EAG9BsJ,aAAe,SAAC7B,EAAQrD,EAAKC,EAAKqD,EAAUC,EAAanD,EAAQoD,EAAanD,EAAQoD,EAAanD,EAAQoD,EAAanD,GAEpH,EAAKqJ,IAAM,IAAIrN,OAAOsN,IAAIC,IAAI,CAC1BC,QAAS,CACL1G,OAAQ,2BACRpD,IAAK,2BACLD,IAAK,2BACLsD,SAAU,qBACVC,YAAa,2BACbnD,OAAQ,2BACRoD,YAAa,2BACbnD,OAAQ,2BACRoD,YAAa,2BACbnD,OAAQ,2BACRoD,YAAa,2BACbnD,OAAQ,8BAIhB,EAAKL,KAAO,IAAIkD,EAAUC,EAAQrD,EAAKC,EAAKqD,EAAUC,EAAanD,EAAQoD,EAAanD,EAAQoD,EAAanD,EAAQoD,EAAanD,GAElI,EAAKsE,SAAS,CAAE3E,KAAM,EAAKA,OAE3B,EAAKkG,WAAa,EAAKwD,IAAII,IAAI,EAAK9J,KAAM,UAAUD,IAAI,IACxD,EAAKgK,QAAU,EAAKL,IAAII,IAAI,EAAK9J,KAAM,OAAOF,IAAIA,GAClD,EAAKkG,QAAU,EAAK0D,IAAII,IAAI,EAAK9J,KAAM,OAEvC,EAAKkG,WAAW8D,eAAe,EAAKf,eACpC,EAAKc,QAAQC,eAAe,EAAKf,eACjC,EAAKjD,QAAQgE,eAAe,EAAKf,eAEjC,EAAKxF,gBAAkB,EAAKiG,IAAIO,YAAY,EAAKjK,KAAM,WAAYyD,GACnE,EAAKA,gBAAgBuG,eAAe,EAAKV,uBAGzC,EAAKjG,YAAc,EAAKqG,IAAII,IAAI,EAAK9J,KAAM,eAAeF,IAAIA,GAC9D,EAAKuD,YAAY2G,eAAe,EAAKR,oBACrC,EAAKtJ,OAAS,EAAKwJ,IAAIQ,SAAS,EAAKlK,KAAM,UAC3C,EAAKE,OAAO8J,eAAe,EAAKR,oBAEhC,EAAKlG,YAAc,EAAKoG,IAAII,IAAI,EAAK9J,KAAM,eAAeF,IAAIA,GAC9D,EAAKwD,YAAY0G,eAAe,EAAKR,oBACrC,EAAKrJ,OAAS,EAAKuJ,IAAIQ,SAAS,EAAKlK,KAAM,UAC3C,EAAKG,OAAO6J,eAAe,EAAKR,oBAEhC,EAAKjG,YAAc,EAAKmG,IAAII,IAAI,EAAK9J,KAAM,eAAeF,IAAIA,GAC9D,EAAKyD,YAAYyG,eAAe,EAAKR,oBACrC,EAAKpJ,OAAS,EAAKsJ,IAAIQ,SAAS,EAAKlK,KAAM,UAC3C,EAAKI,OAAO4J,eAAe,EAAKR,oBAEhC,EAAKhG,YAAc,EAAKkG,IAAII,IAAI,EAAK9J,KAAM,eAAeF,IAAIA,GAC9D,EAAK0D,YAAYwG,eAAe,EAAKR,oBACrC,EAAKnJ,OAAS,EAAKqJ,IAAIQ,SAAS,EAAKlK,KAAM,UAC3C,EAAKK,OAAO2J,eAAe,EAAKR,oBAEhC,EAAKE,IAAIS,cAActB,SAAQ,SAAA9N,GAC3BA,EAAEqP,oB,EAKVX,cAAgB,WAAO,IACX/N,EAAY,EAAKsI,MAAjBtI,QAER,EAAKiJ,SAAS,CAAEjJ,SAAUA,K,EAG9B2O,kBAAoB,SAACtP,GACjB,IAAM6L,EAAK,eACX7L,EAAEuP,iBACRvP,EAAEwP,kBACI,IAAIC,EAAQ,EAAKA,OAASzP,EAAE0P,aAAaD,MACrCE,EAAS,IAAIC,WACjBD,EAAOE,WAAWJ,EAAM,GAAI,SAC5BE,EAAO7D,OAAS,SAAUgE,GACtBjE,EAAMjC,SAAS,CAAEvC,aAAc0I,KAAKC,MAAMF,EAAI7P,OAAOgQ,UAAW,WAC5DpE,EAAM9B,KAAKmG,YAAYrE,EAAMG,OAC7BH,EAAM1B,kB,EAKlBmF,kBAAoB,WAChB,EAAKa,eAAe,EAAK/G,KAAKgH,SAAS,SAAA/I,GACnC,EAAKuC,SAAS,CAAEvC,aAAc0I,KAAKC,MAAM3I,KAAiB,WACtD,EAAK0C,KAAKmG,YAAY,EAAKlE,OAC3B,EAAK7B,oB,EAKjBgG,eAAiB,SAACE,EAAWC,GACzB,IAAMzE,EAAK,eACX,GAAIwE,EAAUZ,OAASY,EAAUZ,MAAMvL,OAAS,GAAKmM,EAAUZ,MAAM,GAAGc,KAAO,EAAG,CAC9E,IAAIC,EAAOH,EAAUZ,MAAM,GAC3B,GAAInO,OAAOsO,WAAY,CACnB,IAAID,EAAS,IAAIC,WACjBD,EAAOc,UAAY,SAAUX,GACzBjE,EAAMjC,SAAS,CAAEvC,aAAc0I,KAAKC,MAAMF,EAAI7P,OAAOgQ,UAAW,WAC5DpE,EAAM9B,KAAKmG,YAAYrE,EAAMG,OAC7BH,EAAM1B,iBAIdwF,EAAOE,WAAWW,EAAM,U,mFApef,IAAD,OAChBlP,OAAOoP,iBAAiB,SAAU9P,KAAK+I,UACvC/I,KAAKwI,KAAKgH,QAAQM,iBAAiB,YAAY,SAAU1Q,GAC9DA,EAAEuP,iBACFvP,EAAEwP,qBAEH5O,KAAKwI,KAAKgH,QAAQM,iBAAiB,aAAa,SAAU1Q,GACzDA,EAAEuP,iBACFvP,EAAEwP,qBAEG5O,KAAKwI,KAAKgH,QAAQM,iBAAiB,OAAQ9P,KAAK0O,mBAEhD1O,KAAK0J,gBAAgBoG,iBAAiB,SAAS,SAAC1Q,GAAO,IAC3CqH,EAAiB,EAAK4B,MAAtB5B,aACFK,EAAI8B,KAAKmH,MAAM3Q,EAAE4Q,MAAS,EAAK9F,IAAIF,OAAOiG,wBAAwBC,MAAQ,GAC1EnD,EAAInE,KAAKmH,MAAM3Q,EAAE+Q,MAAQ,EAAKjG,IAAIF,OAAOiG,wBAAwBG,KAAO,GAGxEC,EAFc,EAAK9M,UAAUkD,GAA3B8F,QAEkB+D,QAAO,SAAA5M,GAAI,OAAIA,EAAK,KAAOoD,GAAKpD,EAAK,KAAQqJ,EAAI,MAAO,GAC5ErG,EAAc,CAChBI,IACAiG,IACAsD,YACAE,QAAS,EAAK7H,UAAUqE,EAAI,GAAK,KAErC,EAAK/D,SAAS,CAAEtC,qB,6CAUpBhG,OAAO8P,oBAAoB,SAAUxQ,KAAK+I,Y,+BAscpC,IAAD,EAC6D/I,KAAKqI,MAA/DE,EADH,EACGA,YAAaxI,EADhB,EACgBA,QAASsE,EADzB,EACyBA,KAAMoC,EAD/B,EAC+BA,aAAcC,EAD7C,EAC6CA,YAElD,OACI,kBAAC,IAAM+J,SAAP,KACI,kBAAC,EAAD,MACA,yBAAKjO,IAAKxC,KAAKmN,cAAelO,UAAU,WACvCyH,GACD,yBAAKzH,UAAU,QACX,4DAASyH,EAAY6J,SACrB,sDAAS7J,EAAY2J,UAAU,GAAG,GAAI7J,QAAQ,KAGlD,2BAAOhH,KAAK,OAAOgD,IAAKxC,KAAKwI,KAAMvJ,UAAU,aAAaE,SAAUa,KAAK0O,oBACzE,yBAAKzP,UAAU,SAASU,QAASK,KAAK8N,eAAe,iDACrD,kBAAC,EAAD,CACI/M,MAAO,CAAEwB,OAAQgG,GACjBxI,QAASA,EACT2B,OAAQ,CAAC,YAAa,YACtBC,KAAM,GACNG,YAAa9B,KAAK8B,cAGrBuC,GACG,kBAAC,EAAD,CACI3C,OAAQ,CAAC,YAAY,YACrBC,KAAM,GACN8E,aAAcA,EACdpC,KAAMA,EACNtE,QAASA,EACT2G,YAAaA,S,GAphBnB9D,aC3CE8N,QACW,cAA7BhQ,OAAOiQ,SAASC,UAEe,UAA7BlQ,OAAOiQ,SAASC,UAEhBlQ,OAAOiQ,SAASC,SAASC,MACvB,2DCZNC,IAAS1O,OAAO,kBAAC,EAAD,MAASsI,SAASqG,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB","file":"static/js/main.f2eba161.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {Input, Button} from 'antd';\nimport './index.less';\n\nexport default () => {\n    const [showInput, setShowInput] = useState(false);\n    const [header, setHeader] = useState(localStorage.getItem('title') || '标题');\n\n    useEffect(() => {\n        localStorage.setItem('title', header);\n    }, [header]);\n\n    return (\n        <div className=\"title-header\">\n            <h1>{header}</h1>\n            {showInput && <Input\n                className=\"title-input\"\n                value={header}\n                onChange={e => {setHeader(e.target.value);}}\n                onPressEnter={() => {setShowInput(!showInput);}}\n                onBlur={() => {setShowInput(!showInput);}}\n            />}\n            {!showInput && <Button\n                className=\"title-btn\"\n                type=\"dashed\"\n                shape=\"circle\"\n                icon=\"edit\"\n                onClick={() => {setShowInput(!showInput);}}\n            />}\n        </div>\n    );\n};\n","var snowStyle = [{\n    \"featureType\": \"background\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"color\": \"#fefefeff\"\n    }\n}, {\n    \"featureType\": \"poilabel\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"road\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#f0f1f7ff\"\n    }\n}, {\n    \"featureType\": \"road\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#e8eaf5ff\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"nationalway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#e8eaf5ff\"\n    }\n}, {\n    \"featureType\": \"nationalway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"provincialway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#e8eaf5ff\"\n    }\n}, {\n    \"featureType\": \"provincialway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"railway\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"highwaysign\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"highwaysign\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"nationalwaysign\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"nationalwaysign\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"provincialwaysign\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"provincialwaysign\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"tertiarywaysign\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"tertiarywaysign\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"subwaylabel\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"subwaylabel\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"poilabel\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": {\n        \"color\": \"#80868dff\"\n    }\n}, {\n    \"featureType\": \"poilabel\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"districtlabel\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": {\n        \"color\": \"#7d82b0ff\"\n    }\n}, {\n    \"featureType\": \"districtlabel\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"poilabel\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"airportlabel\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"on\"\n    }\n}, {\n    \"featureType\": \"airportlabel\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"airportlabel\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": {\n        \"color\": \"#80868dff\"\n    }\n}, {\n    \"featureType\": \"airportlabel\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"manmade\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"manmade\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"color\": \"#eef1fbff\"\n    }\n}, {\n    \"featureType\": \"water\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"water\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        //\"color\": \"#a7c9ffff\"\n        \"color\": \"#a7c9ffff\"\n    }\n}, {\n    \"featureType\": \"green\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"color\": \"#eef1fbff\",\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"subway\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"on\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": {\n        \"color\": \"#7d82b0ff\"\n    }\n}, {\n    \"featureType\": \"town\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"village\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"weight\": 3\n    }\n}, {\n    \"featureType\": \"cityhighway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#e8eaf5ff\"\n    }\n}, {\n    \"featureType\": \"arterial\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#e8eaf5ff\"\n    }\n}, {\n    \"featureType\": \"arterial\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"cityhighway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}];\n\nvar darkStyle = [{\n    \"featureType\": \"background\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"color\": \"#070c17ff\"\n    }\n}, {\n    \"featureType\": \"poilabel\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"road\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"road\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#151e25ff\"\n    }\n}, {\n    \"featureType\": \"road\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#27303bff\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"nationalway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#27303bff\"\n    }\n}, {\n    \"featureType\": \"nationalway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"provincialway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#27303bff\"\n    }\n}, {\n    \"featureType\": \"provincialway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"railway\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"highwaysign\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"highwaysign\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"nationalwaysign\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"nationalwaysign\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"provincialwaysign\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"provincialwaysign\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"tertiarywaysign\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"tertiarywaysign\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"subwaylabel\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"subwaylabel\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"poilabel\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": {\n        \"color\": \"#80868dff\"\n    }\n}, {\n    \"featureType\": \"poilabel\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"districtlabel\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": {\n        \"color\": \"#71767aff\"\n    }\n}, {\n    \"featureType\": \"districtlabel\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"poilabel\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"airportlabel\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"on\"\n    }\n}, {\n    \"featureType\": \"airportlabel\",\n    \"elementType\": \"labels.icon\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"airportlabel\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": {\n        \"color\": \"#80868dff\"\n    }\n}, {\n    \"featureType\": \"airportlabel\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"manmade\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"manmade\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"color\": \"#070c17ff\"\n    }\n}, {\n    \"featureType\": \"water\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"water\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"color\": \"#0e141dff\"\n    }\n}, {\n    \"featureType\": \"green\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"color\": \"#122228ff\",\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"subway\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"on\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"labels.text.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"labels.text.fill\",\n    \"stylers\": {\n        \"color\": \"#5f6468ff\"\n    }\n}, {\n    \"featureType\": \"town\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"village\",\n    \"elementType\": \"labels\",\n    \"stylers\": {\n        \"visibility\": \"off\"\n    }\n}, {\n    \"featureType\": \"highway\",\n    \"elementType\": \"geometry\",\n    \"stylers\": {\n        \"weight\": 3\n    }\n}, {\n    \"featureType\": \"cityhighway\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#27303bff\"\n    }\n}, {\n    \"featureType\": \"arterial\",\n    \"elementType\": \"geometry.fill\",\n    \"stylers\": {\n        \"color\": \"#27303bff\"\n    }\n}, {\n    \"featureType\": \"arterial\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}, {\n    \"featureType\": \"cityhighway\",\n    \"elementType\": \"geometry.stroke\",\n    \"stylers\": {\n        \"color\": \"#ffffff0\"\n    }\n}];\n\nexport {darkStyle, snowStyle};","import React, {\n    Component\n} from 'react';\nimport {\n    darkStyle\n} from './style';\n\nexport default class Map3D extends Component {\n\n    componentDidMount() {\n        this.initMap();\n        this.forceUpdate();\n    }\n\n    initMap() {\n\n        let options = Object.assign({\n            tilt: 60,\n            heading: 0\n        }, this.props.options);\n        let map = new window.BMapGL.Map(this.mapRef, {\n            restrictCenter: false,\n            style: options.style || darkStyle\n        });\n        map.enableKeyboard();\n        map.enableScrollWheelZoom();\n        map.enableInertialDragging();\n        map.enableContinuousZoom();\n        map.setTilt(options.tilt);\n        map.setHeading(options.heading);\n        map.setDisplayOptions({\n            indoor: false,\n            poi: true,\n            skyColors: options.skyColors || [\n                'rgba(5, 5, 30, 0.01)',\n                'rgba(5, 5, 30, 1.0)'\n            ]\n        });\n        if (this.props.center && this.props.zoom) {\n            map.centerAndZoom(new window.BMapGL.Point(this.props.center[0], this.props.center[1]), this.props.zoom);\n        }\n\n        this.map = map;\n        this.props.onMapLoaded && this.props.onMapLoaded(map);\n    }\n\n    renderChildren() {\n\n        const {\n            children\n        } = this.props;\n\n        if (!children || !this.map) return;\n\n        return React.Children.map(children, child => {\n\n            if (!child) {\n                return;\n            }\n\n            if (typeof child.type === 'string') {\n                return child;\n            } else {\n                return React.cloneElement(child, {\n                    map: this.map\n                });\n            }\n\n        })\n\n    }\n\n    onRender() {\n\n        if (!this.props.render || !this.map) {\n            return;\n        }\n\n        return this.props.render(this.map);\n    }\n\n    //是否显示\n    isShow = (visible) => {\n        return visible ? 'block' : 'none'\n    }\n\n    render() {\n        const {\n            visible\n        } = this.props\n        let style = {\n            display: this.isShow(visible),\n            position: 'relative',\n            height: '100%',\n            ...this.props.style\n        };\n        return (\n            <div style={style} >\n                < div ref = { mapRef => (this.mapRef = mapRef)}\n                    style = {{ width: '100%', height: '100%' }} > \n                </div>\n                { this.renderChildren() }\n                { this.onRender() }\n            </div>\n        );\n    }\n\n}","export var simpleMapStyle = {\n    styleJson: [\n        {\n            \"featureType\": \"all\",\n            \"elementType\": \"all\",\n            \"stylers\": {\n                \"lightness\": 20,\n                \"saturation\": -70\n            }\n        }\n    ]\n}","import React, { Component } from 'react';\nimport { Map, Road } from 'react-bmap';\nimport Color from 'color';\nimport { simpleMapStyle } from './style';\n\nexport default class Map2D extends Component {\n  // 累加器\n  reducer = (accumulator, currentValue) =>  accumulator + currentValue[1]\n  \n  // 获取每个links的平均值\n  getAverageValue = (items) => items.reduce(this.reducer, 0) / items.length\n\n  parseData = (data) => {\n    const lineData = []\n    data.map(item => {\n      lineData.push({\n        geometry: {\n            type: 'LineString',\n            coordinates: item.loc,\n            value: this.getAverageValue(item.data) \n        }\n      });\n    })\n    return lineData\n  }\n\n  //是否显示\n  isShow = (visible) => {\n    return visible ? 'none' : 'block'\n  }\n\n  dataHander = data => {\n    const lineData = []\n    data.map(item => {\n      lineData.push(item.geometry.coordinates)\n    })\n    return lineData\n  }\n\n  highlightRoadHander = (data, index = 0) => {\n    return [data[index].geometry.coordinates]\n  }\n\n  heatDataHander = (max, min, data) => {\n    const { text } = this.props\n    const { color1, color2, color3, color4, color5 } = text\n    const colorArr = [\n      [0.2, color1],\n      [0.6, color2],\n      [0.85, color3],\n      [0.9, color4],\n      [1, color5]\n    ];\n\n    const splitList = {}\n    const category = []\n    data.map((item, index) => {\n      const percent = (item.geometry.value - min) / (max - min)\n      splitList[index] = this.getColorFromColorStops(colorArr, percent)\n      category.push(index)\n    })\n\n    return { splitList, category }\n  }\n\n  getColorFromColorStops = (colorStops, percent) => { \n    if (percent < 0) {\n      percent = 0;\n    }\n    if (percent > 1) {\n      percent = 1;\n    }\n    let i = 0;\n    for (let length = colorStops.length; i < length; ++i) {\n      const colorStop = colorStops[i];\n      if (colorStop[0] >= percent) {\n        break;\n      }\n    }\n    const startColorStop = colorStops[i - 1];\n    const endColorStop = colorStops[i];\n    let startPercent = 0;\n    let endPercent = 1;\n    let startColor = null;\n    let endColor = null;\n    if (startColorStop) {\n      startPercent = startColorStop[0];\n      startColor = startColorStop[1];\n    }\n    if (endColorStop) {\n      endPercent = endColorStop[0];\n      endColor = endColorStop[1];\n    }\n    if (!startColor) {\n      startColor = endColor || '#000';\n    }\n    if (!endColor) {\n      endColor = startColor || '#000';\n    }\n\n    let relativePercent = (percent - startPercent) / (endPercent - startPercent);\n    const startColorObj = Color(startColor)\n    const endColorObj = Color(endColor);\n    const sr = startColorObj.red();\n    const sg = startColorObj.green();\n    const sb = startColorObj.blue();\n    const sa = startColorObj.alpha();\n    const er = endColorObj.red();\n    const eg = endColorObj.green();\n    const eb = endColorObj.blue();\n    const ea = endColorObj.alpha();\n    return `rgba(${(sr + (er - sr) * relativePercent).toFixed()},` +\n      `${(sg + (eg - sg) * relativePercent).toFixed()},` +\n      `${(sb + (eb - sb) * relativePercent).toFixed()},` +\n      `${(sa + (ea - sa) * relativePercent).toFixed()})`;\n  }\n\n\n  render() {\n    const { center, zoom, text, dataWeRender, selectValue } = this.props\n    const linksData = this.parseData(dataWeRender)\n\n    // 路线绘制\n    const roadPath = this.dataHander(linksData)\n\n    // 高亮路线\n    const highlightRoad = selectValue && this.highlightRoadHander(linksData, selectValue.x)\n    \n    // 颜色控制\n    const { splitList, category } =  this.heatDataHander(text.max, text.min, linksData)\n\n    return (\n      <Map\n        style={{ height: '100vh' }}\n        mapStyle={simpleMapStyle}\n        center={{ lng: center[0], lat: center[1] }}\n        zoom={zoom}\n        enableScrollWheelZoom={true}\n      >\n      <Road\n        category={[1]}\n        splitList={{\n          1: '#0000FF'\n        }}\n        color='rgba(0,255,0,0.7)'\n        bgColor='rgba(255,255,255,0.1)'\n        arrowColor='rgba(255,0,0,0.7)'\n        lineWidth={40}\n        roadPath={highlightRoad}\n      />\n      <Road\n        category={category}\n        splitList={splitList}\n        color='rgba(0,255,0,0.7)'\n        bgColor='rgba(255,255,255,0.1)'\n        arrowColor='rgba(255,0,0,0.7)'\n        lineWidth={10}\n        roadPath={roadPath}\n      />\n      </Map>\n    );\n\n\n  }\n}","import React, { Component } from 'react';\nimport * as mapvgl from 'mapvgl';\nimport Color from 'color';\nimport h337 from 'heatmap.js';\nimport TitleHeader from './components/TitleHeader';\nimport Map3D from './components/Map3D';\nimport Map2D from './components/Map2D';\nimport ShenhaiData from './data/chengdu_avgspeed_sort_work.json';\n\nimport './App.less';\n\nfunction FizzyText(radius, max, min, gradient, color1Value, color1, color2Value, color2, color3Value, color3, color4Value, color4) {\n    this.radius = radius;\n    this.max = max;\n    this.min = min;\n    this.gradient = gradient \n\n    this.color1Value = color1Value;\n    this.color1 = color1;\n    this.color2Value = color2Value;\n    this.color2 = color2;\n    this.color3Value = color3Value;\n    this.color3 = color3;\n    this.color4Value = color4Value;\n    this.color4 = color4;\n\n}\n\nconst gradientOptions = [\n    { \n        0.25: \"rgba(0, 0, 255, 1)\",\n        0.55: \"rgba(0, 255, 0, 1)\",\n        0.85: \"rgba(255, 255, 0, 1)\",\n        1.0: \"rgba(255, 0, 0, 1)\"\n    },\n    { \n        0.25: \"rgba(255, 0, 0, 1)\",\n        0.55: \"rgba(255, 255, 0, 1)\",\n        0.85: \"rgba(0, 255, 0, 1)\",\n        1.0: \"rgba(0, 0, 255, 1)\"\n    },\n    { \n        0.25: \"rgba(0, 0, 255, 1)\",\n        0.55: \"rgba(0, 255, 0, 1)\",\n        0.85: \"rgba(255, 255, 0, 1)\",\n        1.0: 'rgba(255, 255, 255, 1)'\n    },\n    { \n        0.25: 'rgba(255, 255, 255, 1)',\n        0.55: \"rgba(255, 255, 0, 1)\",\n        0.85: \"rgba(0, 255, 0, 1)\",\n        1: \"rgba(0, 0, 255, 1)\"\n    }\n  ];\n\nclass App extends Component {\n\n    canvasWidth = 298;\n    canvasHeight = 96;\n    state = {\n        dataWeRender: ShenhaiData,\n        innerHeight: window.innerHeight,\n        visible: true,\n        text: null,\n        selectValue: null\n    };\n    tRef = React.createRef();\n\n    componentDidMount() {\n        window.addEventListener('resize', this.onResize);\n        this.tRef.current.addEventListener(\"dragover\", function (e) {\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t})\n\t\tthis.tRef.current.addEventListener(\"dragenter\", function (e) {\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t})\n        this.tRef.current.addEventListener(\"drop\", this.onDropUploadClick)\n\n        this.canvasContainer.addEventListener('click', (e) => {\n            const { dataWeRender } = this.state\n            const x = Math.ceil((e.pageX -  this.ctx.canvas.getBoundingClientRect().left) / 2)\n            const y = Math.ceil((e.pageY - this.ctx.canvas.getBoundingClientRect().top) / 2)\n            const { hotData } = this.parseData(dataWeRender);   \n            \n            const showPoint = hotData.filter(item => item[0] === x && item[1]  === y - 1 ) || []\n            const selectValue = {\n                x,\n                y,\n                showPoint,\n                nowTime: this.parseTime(y / 96 * 24)\n            }\n            this.setState({ selectValue })\n    \n        })\n    }\n\n    parseTime = (num) => {\n        return ('0' + Math.floor(num) % 24).slice(-2) + ':' + ((num % 1)*60 + '0').slice(0, 2);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.onResize);\n    }\n\n    onResize = () => {\n        this.setState({\n            innerHeight: window.innerHeight\n        });\n    }\n\n    onMapLoaded = map => {\n        this.map = map;\n        this.initMapvgl(map);\n    }\n\n    initMapvgl = map => {\n        const { dataWeRender } = this.state\n        let { heatMax } = this.parseData(dataWeRender);\n       \n        this.view = new mapvgl.View({\n            map: map\n        });\n        // 初始化 GUI面板\n        this.initGUIPanel(4, heatMax, 0, { \n            0.25: \"rgba(0, 0, 255, 1)\",\n            0.55: \"rgba(0, 255, 0, 1)\",\n            0.85: \"rgba(255, 255, 0, 1)\",\n            1.0: \"rgba(255, 0, 0, 1)\"\n        },  heatMax * .25, \"rgba(0, 0, 255, 1)\",\n            heatMax * .55, \"rgba(0, 255, 0, 1)\",\n            heatMax * .85, \"rgba(255, 255, 0, 1)\",\n            heatMax * 1, \"rgba(255, 0, 0, 1)\")\n        this.initCanvas();\n        this.drawMapvgl();\n        // this.drawTimeText();\n    }\n\n    initCanvas = () => {\n        const { gradient } = this.text\n\n        const nuConfig = {\n            container: this.canvasContainer,\n            blur: 1,\n            gradient,\n            backgroundColor: '#000'\n        };\n\n        this.heatmap = h337.create(nuConfig);\n        this.canvas = this.heatmap._renderer.canvas;\n        this.ctx = this.canvas.getContext('2d');\n    }\n\n    drawMapvgl = () => {\n        const { dataWeRender } = this.state\n        const { heatMax, heatData, lineData } = this.parseData(dataWeRender);\n\n        this.maxText.setValue(heatMax)\n        this.color1Value.setValue(heatMax * .25)\n        this.color2Value.setValue(heatMax * .55)\n        this.color3Value.setValue(heatMax * .85)\n        this.color4Value.setValue(heatMax * 1)        \n\n        this.radiusText.setValue(2)\n\n        heatData.map(item =>  Object.assign(item, {radius: 4}))\n\n        this.heatmap.setData({\n            max: heatMax,\n            min: 0,\n            data: heatData\n        });\n        this.mockCanvas = document.createElement('canvas');\n        this.mockCanvas.width = 256\n        this.mockCanvas.height = 128\n        this.mockCtx = this.mockCanvas.getContext('2d');\n\n        this.imageData = this.canvas.toDataURL();\n        let img = this.img = document.createElement('img');\n        this.img.src = this.imageData\n        this.img.width = 299 \n        this.img.height = 96 \n        const _this = this\n        this.img.onload = function () {\n            _this.mockCtx.drawImage(img, 0, 0, 299, 96, 0, 0, 256, 128);\n            _this.layer = new mapvgl.WallLayer({\n                texture: _this.mockCanvas,\n                height: 12000,\n                enablePreciseMap: true\n            });\n            _this.view.addLayer(_this.layer);  \n            _this.layer.setData(lineData);\n        }\n\n    }\n\n    drawTimeText = () => {\n        this.ctx.font = '20px normal 微软雅黑';\n        this.ctx.fillStyle = '#fff';\n        this.ctx.textAlign = 'left';\n        this.ctx.textBaseline = 'middle';\n        this.ctx.save();\n        this.ctx.scale(1/3, 1);\n        for (let i = 0; i <= 4; i++) {\n            this.ctx.fillText(`${24/4*i}:00`, 0, this.canvasHeight / 4 * i);\n        }\n        this.ctx.restore();\n    }\n\n    parseData = roadData => {\n        let dataMaxWidth = roadData.length;\n        let dataMaxHeight = 0;\n        let dataMaxValue = 0;\n        let dataMinValue = Infinity;\n        let lineData = [];\n        let hotData = [];\n        let path = [];\n        for (let i = 0; i < roadData.length; i++) {\n            const link = roadData[i];\n            for (let j = 0; j < link.data.length; j++) {\n                const hot = link.data[j];\n                hotData.push([i, ...hot]);\n                dataMaxHeight = Math.max(dataMaxHeight, hot[0]);\n                dataMaxValue = Math.max(dataMaxValue, hot[1]);\n                dataMinValue = Math.min(dataMinValue, hot[1]);\n            }\n\n            let loc = link.loc.split(',');\n            for (let k = 0; k < loc.length; k+=2) {\n                const x = Number(loc[k]);\n                const y = Number(loc[k +1 ]);\n                path.push([x, y]);\n            }\n        }\n \n        lineData.push({\n            geometry: {\n                type: 'LineString',\n                coordinates: path\n            }\n        });\n\n        var heatData = [];\n        var preWidth = this.canvasWidth / dataMaxWidth;\n        var preHeight = this.canvasHeight / dataMaxHeight;\n  \n        hotData.forEach(data => {\n            heatData.push({\n                x: data[0] * preWidth,\n                y: data[1] * preHeight,\n                value: data[2]\n            })\n        });\n\n        return {\n            heatMax: dataMaxValue,\n            heatData,\n            lineData,\n            hotData \n        };\n    }\n\n    bindCanvasRef = input => {\n        this.canvasContainer = input;\n    }\n\n    layerSetData = () => {\n        const { dataWeRender } = this.state\n        const { lineData } = this.parseData(dataWeRender);\n\n        if (this.layer) {\n            this.view.addLayer(this.layer);  \n            this.layer.setData(lineData);\n        }\n    }\n\n    changeHeatMap = () => {\n        const { dataWeRender } = this.state\n        const { heatData } = this.parseData(dataWeRender);\n        const { radius, max, min } = this.text\n        heatData.map(item =>  Object.assign(item, {radius}))\n        this.heatmap.setDataMax(max)\n        this.heatmap.setDataMin(min)\n\n        this.heatmap.setData({\n            max: max,\n            min: min,\n            data: heatData\n        });\n\n        this.mockCtx = this.mockCanvas.getContext('2d');\n        this.mockCtx.clearRect(0, 0, this.mockCanvas.width, this.mockCanvas.height)\n        let imageData = this.heatmap._renderer.canvas.toDataURL();\n\n        this.img.src = imageData\n        const _this = this\n\n        this.img.onload = function () {\n            _this.mockCtx.drawImage(_this.img, 0, 0, 299, 96, 0, 0, 256, 128);\n            _this.layer.setOptions({\n                texture: _this.mockCanvas,\n            })\n        }\n        this.layerSetData()\n        this.forceUpdate()\n    }\n\n    getColorFromColorStops = (colorStops, percent) => { \n        if (percent < 0) {\n          percent = 0;\n        }\n        if (percent > 1) {\n          percent = 1;\n        }\n        let i = 0;\n        for (let length = colorStops.length; i < length; ++i) {\n          const colorStop = colorStops[i];\n          if (colorStop[0] >= percent) {\n            break;\n          }\n        }\n        const startColorStop = colorStops[i - 1];\n        const endColorStop = colorStops[i];\n        let startPercent = 0;\n        let endPercent = 1;\n        let startColor = null;\n        let endColor = null;\n        if (startColorStop) {\n          startPercent = startColorStop[0];\n          startColor = startColorStop[1];\n        }\n        if (endColorStop) {\n          endPercent = endColorStop[0];\n          endColor = endColorStop[1];\n        }\n        if (!startColor) {\n          startColor = endColor || '#000';\n        }\n        if (!endColor) {\n          endColor = startColor || '#000';\n        }\n    \n        let relativePercent = (percent - startPercent) / (endPercent - startPercent);\n        const startColorObj = Color(startColor)\n        const endColorObj = Color(endColor);\n        const sr = startColorObj.red();\n        const sg = startColorObj.green();\n        const sb = startColorObj.blue();\n        const sa = startColorObj.alpha();\n        const er = endColorObj.red();\n        const eg = endColorObj.green();\n        const eb = endColorObj.blue();\n        const ea = endColorObj.alpha();\n        return `rgba(${(sr + (er - sr) * relativePercent).toFixed()},` +\n          `${(sg + (eg - sg) * relativePercent).toFixed()},` +\n          `${(sb + (eb - sb) * relativePercent).toFixed()},` +\n          `${(sa + (ea - sa) * relativePercent).toFixed()})`;\n      }\n\n    changeHeatMapAllColor = () => {\n        const { max, color1Value, color2Value, color3Value, color4Value, gradient} = this.text\n\n        const nuConfig = {\n            gradient,\n            backgroundColor: '#000'\n        };\n\n        \n        this.color1.setValue(nuConfig.gradient[color1Value / max])\n        this.color2.setValue(nuConfig.gradient[color2Value / max])\n        this.color3.setValue(nuConfig.gradient[color3Value / max])\n        this.color4.setValue(nuConfig.gradient[color4Value / max])        \n\n        this.heatmap.configure(nuConfig)\n\n        this.mockCtx = this.mockCanvas.getContext('2d');\n        this.mockCtx.clearRect(0, 0, this.mockCanvas.width, this.mockCanvas.height)\n        let imageData = this.heatmap._renderer.canvas.toDataURL();\n\n        this.img.src = imageData\n    \n        const _this = this\n        this.img.onload = function () {\n            _this.mockCtx.drawImage(_this.img, 0, 0, 299, 96, 0, 0, 256, 128);\n            _this.layer.setOptions({\n                texture: _this.mockCanvas,\n            })\n        }\n        this.layerSetData()\n        this.forceUpdate()\n    }\n    changeHeatMapColor = () => {\n        const { max, color1Value, color2Value, color3Value, color4Value, color1, color2, color3, color4} = this.text\n        \n        const colorArr = [\n            [0.25, color1],\n            [0.55, color2],\n            [0.85, color3],\n            [1, color4]\n        ];\n  \n        const nuConfig = {\n            gradient: {\n                [color1Value / max] : this.getColorFromColorStops(colorArr, color1Value / max),\n                [color2Value / max] : this.getColorFromColorStops(colorArr, color2Value / max),\n                [color3Value / max] : this.getColorFromColorStops(colorArr, color3Value / max),\n                [color4Value / max] : this.getColorFromColorStops(colorArr, color4Value / max),\n            },\n            backgroundColor: '#000'\n        };      \n\n        this.color1.setValue(nuConfig.gradient[color1Value / max])\n        this.color2.setValue(nuConfig.gradient[color2Value / max])\n        this.color3.setValue(nuConfig.gradient[color3Value / max])\n        this.color4.setValue(nuConfig.gradient[color4Value / max])\n        \n        this.color1Value.max(max)\n        this.color2Value.max(max)\n        this.color3Value.max(max)\n        this.color4Value.max(max)\n\n\n        this.heatmap.configure(nuConfig)\n\n        this.mockCtx = this.mockCanvas.getContext('2d');\n        this.mockCtx.clearRect(0, 0, this.mockCanvas.width, this.mockCanvas.height)\n        let imageData = this.heatmap._renderer.canvas.toDataURL();\n\n        this.img.src = imageData\n    \n        const _this = this\n        this.img.onload = function () {\n            _this.mockCtx.drawImage(_this.img, 0, 0, 299, 96, 0, 0, 256, 128);\n            _this.layer.setOptions({\n                texture: _this.mockCanvas,\n            })\n        }\n        this.layerSetData()\n        this.forceUpdate()\n    }\n\n    onChangeClick = () => {\n        const { visible } = this.state\n        \n        this.setState({ visible: !visible })\n    }\n      \n    initGUIPanel = (radius, max, min, gradient, color1Value, color1, color2Value, color2, color3Value, color3, color4Value, color4) => {\n       \n        this.gui = new window.dat.GUI({\n            nameMap: {\n                radius: '辐射半径',\n                min: '最小阈值',\n                max: '最大阈值',\n                gradient: '渐变色',\n                color1Value: '一档位值',\n                color1: '一档颜色',\n                color2Value: '二档位值',\n                color2: '二档颜色',\n                color3Value: '三档位值',\n                color3: '三档颜色',\n                color4Value: '四档位值',\n                color4: '四档颜色',\n            }\n        });\n\n        this.text = new FizzyText(radius, max, min, gradient, color1Value, color1, color2Value, color2, color3Value, color3, color4Value, color4);\n   \n        this.setState({ text: this.text })\n        \n        this.radiusText = this.gui.add(this.text, 'radius').min(0.1);\n        this.minText = this.gui.add(this.text, 'min').max(max);\n        this.maxText = this.gui.add(this.text, 'max');\n\n        this.radiusText.onFinishChange(this.changeHeatMap);\n        this.minText.onFinishChange(this.changeHeatMap);\n        this.maxText.onFinishChange(this.changeHeatMap);\n        \n        this.gradientOptions = this.gui.addGradient(this.text, 'gradient', gradientOptions);\n        this.gradientOptions.onFinishChange(this.changeHeatMapAllColor);\n\n        // 第一档\n        this.color1Value = this.gui.add(this.text, 'color1Value').max(max);\n        this.color1Value.onFinishChange(this.changeHeatMapColor);\n        this.color1 = this.gui.addColor(this.text, 'color1');\n        this.color1.onFinishChange(this.changeHeatMapColor);\n        // 第二档\n        this.color2Value = this.gui.add(this.text, 'color2Value').max(max);\n        this.color2Value.onFinishChange(this.changeHeatMapColor);\n        this.color2 = this.gui.addColor(this.text, 'color2');\n        this.color2.onFinishChange(this.changeHeatMapColor);\n        // 第三档\n        this.color3Value = this.gui.add(this.text, 'color3Value').max(max);\n        this.color3Value.onFinishChange(this.changeHeatMapColor);\n        this.color3 = this.gui.addColor(this.text, 'color3');\n        this.color3.onFinishChange(this.changeHeatMapColor);\n        // 第四档\n        this.color4Value = this.gui.add(this.text, 'color4Value').max(max);\n        this.color4Value.onFinishChange(this.changeHeatMapColor);\n        this.color4 = this.gui.addColor(this.text, 'color4');\n        this.color4.onFinishChange(this.changeHeatMapColor);\n\n        this.gui.__controllers.forEach(e => {\n            e.updateDisplay()\n        })\n    }\n\n    // 切换控制\n    onChangeClick = () => {\n        const { visible } = this.state\n\n        this.setState({ visible: !visible })\n    }\n\n    onDropUploadClick = (e) => {\n        const _this = this\n        e.preventDefault()\n\t\te.stopPropagation()\n        var files = this.files || e.dataTransfer.files\n        var reader = new FileReader()\n        reader.readAsText(files[0], 'utf-8')\n        reader.onload = function (evt) {\n            _this.setState({ dataWeRender: JSON.parse(evt.target.result) }, () => {\n                _this.view.removeLayer(_this.layer)\n                _this.drawMapvgl()\n            })\n        }\n    }\n\n    onDropUploadClick = () => {\n        this.getFileContent(this.tRef.current, dataWeRender => {\n            this.setState({ dataWeRender: JSON.parse(dataWeRender) }, () => {\n                this.view.removeLayer(this.layer)\n                this.drawMapvgl()\n            })\n        });\n    }\n    \n    getFileContent = (fileInput, callback) => {\n        const _this = this\n        if (fileInput.files && fileInput.files.length > 0 && fileInput.files[0].size > 0) {\n            var file = fileInput.files[0];\n            if (window.FileReader) {\n                var reader = new FileReader();\n                reader.onloadend = function (evt) {\n                    _this.setState({ dataWeRender: JSON.parse(evt.target.result) }, () => {\n                        _this.view.removeLayer(_this.layer)\n                        _this.drawMapvgl()\n                    })\n                };\n                // 包含中文内容用gbk编码\n                reader.readAsText(file, 'gbk');\n            }\n        }\n    };\n\n    render() {\n        const { innerHeight, visible, text, dataWeRender, selectValue } = this.state;\n        \n        return (\n            <React.Fragment>\n                <TitleHeader />\n                <div ref={this.bindCanvasRef} className=\"canvas\"></div>\n                {selectValue &&\n                <div className=\"show\">\n                    <p>当前时间：{selectValue.nowTime}</p>\n                    <p>当前值：{(selectValue.showPoint[0][2]).toFixed(2)}</p>\n                </div>}\n                {/* <div ref={this.tRef} className=\"dashboard\">请将数据拖入</div> */}\n                <input type='file' ref={this.tRef} className=\"fileUpload\" onChange={this.onDropUploadClick}></input>\n                <div className=\"change\" onClick={this.onChangeClick}><b>切换2D/3D</b></div>\n                <Map3D\n                    style={{ height: innerHeight }}\n                    visible={visible}\n                    center={[11586045.04, 3566065.08]}\n                    zoom={11}\n                    onMapLoaded={this.onMapLoaded}\n                >\n                </Map3D>\n                {text &&\n                    <Map2D\n                        center={[11586045.04,3566065.08]}\n                        zoom={11}\n                        dataWeRender={dataWeRender}\n                        text={text}\n                        visible={visible}\n                        selectValue={selectValue}\n                    >\n                    </Map2D> \n                }\n            </React.Fragment>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}